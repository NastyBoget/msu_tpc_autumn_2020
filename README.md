## Извлечение метаданных из текстов нормативно-правовых актов на русском языке

Реализован алгоритм, принимающий на вход текстовый файл с НПА и возвращающий JSON объект, содержащий извлеченные метаданные.
Алгоритм поддерживает следующие типы метаданных:
1. тип документа;
2. номер документа;
3. дата принятия;
4. название документа; 
5. орган, принявший акт.

Для каждого извлекатора метаданных описана своя функция `preprocess_doc()`, 
которая исправляет некоторые опечатки, возникшие в результате работы программы Tesseract,
удаляет ненужные для анализа символы и приводит буквы к нижнему регистру.

### Тип документа

Тип документа указывается в шапке документа (в верхней части документа).
В рамках задания документ может относиться к одному из следующих типов:
* «федеральный закон», 
* «постановление»,
* «приказ»,
* «распоряжение»,
* «закон»,
* «указ».

Извлечение типа документа производится с помощью функции `extract_type()`,
расположенной в файле `type_extractor.py`. 

Несколько ключевых слов ищутся в документе одновременно, 
из них выбирается первое подходящее, возвращается тип, соответствующий данному слову.

### Номер документа

Номер документа часто указывается после символа № и может состоять из цифр, букв и спецсимволов. 
Номер документа извлекается из текста в виде строки без дополнительной обработки.

Извлечение номера документа производится с помощью функции `extract_number()`,
расположенной в файле `number_extractor.py`.

При обработке документа удаляются лишние тире и подчеркивания, исправляются опечатки для постановления
и $ исправляется на 8 (ошибка распознавания текста).

Для каждого типа документа подобрано свое регулярное выражение, 
на основе которого извлекался номер. Если документ не подошел ни под один шаблон,
делается предположение, что номер расположен недалеко от даты принятия документа,
и если после даты найден номер, возвращается он. Если всё еще ничего не подошло,
ищется первое вхождение символа №, и в качестве номера возвращается текст после него.

### Дата принятия

Поле date должно содержать дату принятия НПА в виде строки в формате: dd.mm.yyyy

Извлечение даты принятия документа производится с помощью функции `extract_date()`,
расположенной в файле `date_extractor.py`.

Аналогично номеру, для каждого типа документа подобрано свое регулярное выражение, 
на основе которого извлекалась дата. Для постановлений, приказов и указов 
предполагается, что дата расположена недалеко от названия типа документа.
Для законов извлекалась максимальная по значению дата из всех найденных.
Если документ не подошел ни под один шаблон, в документе производится поиск
всех дат и в качестве ответа возвращается максимальная.


### Название документа

Название НПА – это краткий текст, описывающий основную суть и тему документа.
Название часто начинается с предлогов «о» или «об». 
Поле name должно содержать строку с названием в кавычках или без, в зависимости от того, как оно встретилось в тексте НПА.
В названии не учитывается регистр букв, пробелы и символы перевода строки не различаются.

Извлечение названия документа производится с помощью функции `extract_name()`,
расположенной в файле `authority_name_extractor.py`.

Для извлечения названия было написано несколько регулярных выражений, 
под которые подходят строки, начинающиеся с `о, об, вопросы, о внесении изменения`.
Индикатором конца названия служат два переноса строки или закрывающая кавычка.
Варианты проверяются последовательно, от более вероятного к менее вероятному.

### Орган, принявший акт

Для каждого документа определяется орган, его принявший.
Поле authority должно содержать наименование органа в нормализованном виде.
Для авторства не учитывается регистр букв, пробелы и символы перевода строки не различаются.

Извлечение автора документа производится с помощью функции `extract_authority()`,
расположенной в файле `authority_name_extractor.py`.

Для федерального закона возвращается "Государственная Дума Федерального собрания Российской Федерации".
Для закона, указа, постановления и приказа написаны специальные функции, извлекающие автора.
Для указа искались вхождения слов `глава, губернатор, президент` и выбиралась строка с самым первым найденным вхождением.
Для закона использовались специальные регулярные выражения и нормализатор.
Для приказа и постановления использовался набор регулярных выражений и шаблонов.

В тех документах, для которых не подошел ни один шаблон, ищутся организации из списка 
и из тех организаций, которые были найдены, возвращается та, которая встретилась раньше всего.
Так как не все слова нужно было нормализовать (географическое расположение нормализовать не нужно),
приведение органа к начальной форме проводилось вручную по заранее составленному словарю с заменами.

Если ничего из списка выше не подошло, авторство искалось после слова "принят".
